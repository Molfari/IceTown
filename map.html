<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IceTown Map</title>
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            font-family: Arial, sans-serif;
        }

        #map {
            width: 100%;
            height: 100%;
            position: absolute;
        }

        .error-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 20px;
            border-radius: 10px;
            display: none;
            z-index: 100;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <div id="error" class="error-message"></div>

    <script>
        console.log("üîÑ –ü–æ—á–∞—Ç–æ–∫ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –º–∞–ø–∏...");

        mapboxgl.accessToken = 'YOUR_MAPBOX_ACCESS_TOKEN';

        const map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/mapbox/streets-v11',
            center: [30.5234, 50.4501], // –ö–∏—ó–≤ (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º)
            zoom: 17
        });

        map.on('load', () => {
            console.log("‚úÖ –ú–∞–ø–∞ —É—Å–ø—ñ—à–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∞");
        });

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≤–∏–≤–µ–¥–µ–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫
        function showError(message) {
            console.error(message);
            const errorDiv = document.getElementById('error');
            errorDiv.innerText = message;
            errorDiv.style.display = "block";
        }

        // –û—Ç—Ä–∏–º–∞–Ω–Ω—è –≥–µ–æ–ª–æ–∫–∞—Ü—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
        if (navigator.geolocation) {
            console.log("üì° –ó–∞–ø–∏—Ç –≥–µ–æ–ª–æ–∫–∞—Ü—ñ—ó...");
            navigator.geolocation.getCurrentPosition(
                (position) => {
                    const userCoordinates = [position.coords.longitude, position.coords.latitude];
                    console.log(`üìç –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞: ${userCoordinates}`);
                    map.setCenter(userCoordinates);
                    new mapboxgl.Marker()
                        .setLngLat(userCoordinates)
                        .addTo(map);
                },
                (error) => {
                    showError("‚ùå –ù–µ–º–æ–∂–ª–∏–≤–æ –æ—Ç—Ä–∏–º–∞—Ç–∏ –≥–µ–æ–ª–æ–∫–∞—Ü—ñ—é: " + error.message);
                },
                {
                    enableHighAccuracy: true, // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤–∏—Å–æ–∫–æ—Ç–æ—á–Ω—ñ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏
                    timeout: 10000, // –ß–µ–∫–∞—Ç–∏ –Ω–µ –±—ñ–ª—å—à–µ 10 —Å–µ–∫
                    maximumAge: 0 // –ó–∞–≤–∂–¥–∏ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ —Å–≤—ñ–∂—ñ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏
                }
            );
        } else {
            showError("‚ùå –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î –≥–µ–æ–ª–æ–∫–∞—Ü—ñ—é.");
        }

    </script>
</body>
</html>
